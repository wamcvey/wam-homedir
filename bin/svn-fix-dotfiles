#!/bin/sh

if [ "$1" = "" ] 
then
	echo "$0: must specify an archive directory for original files" >&2
	exit 1
fi

cd $HOME/.dotfiles
find . ! -type d -print -o -name .svn -prune| while read file
do
	if [ -h "$HOME/$file" ] ; then
		continue
	fi
	if [ -e "$HOME/$file" ] ; then
		mkdir -p "$1"
		cd $HOME
		mv "$HOME/$file" "$1"
	fi
	ln -s "$HOME/.dotfiles/$file" "$HOME/$file" 
done
